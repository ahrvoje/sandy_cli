# Sandy Sandbox Configuration
# ============================================================
# Default template. For mode-specific templates, see:
#   sandy_config_appcontainer.toml  — AppContainer mode
#   sandy_config_restricted.toml    — Restricted Token mode
#
# All sandbox settings are defined here. Permissions are opt-in:
# if not listed in [allow], they are blocked by default.

# ============================================================
# SANDBOX MODE (required)
# ============================================================

[sandbox]
token = "appcontainer"     # "appcontainer" (default) or "restricted"
# integrity = "low"        # restricted only: "low" or "medium"

# ============================================================
# ACCESS — File and folder grants
# ============================================================
# Grant the sandboxed process access to specific folders or files.
# Use single quotes for Windows paths (no backslash escaping needed).

[access]
# read = [
#     'C:\data\config.json',          # single file
#     'C:\Python314',                 # entire folder (recursive)
# ]
# write = [
#     'C:\logs\agent.log',            # single log file
#     'C:\temp\output',               # output folder
# ]
# execute = ['C:\tools\bin']          # execute-only (no read)
# append = ['C:\logs\audit.log']      # append-only (no overwrite)
# delete = ['C:\temp\scratch']        # delete-only
# all = ['C:\workspace']              # full access

# ============================================================
# PERMISSIONS — Opt-in capabilities (mode-specific)
# ============================================================
# AppContainer: system_dirs, network, localhost, lan, stdin
# Restricted:   named_pipes, stdin

[allow]
system_dirs = true   # read C:\Windows, Program Files (appcontainer only)
# network = true     # outbound internet access            (appcontainer only)
# localhost = true   # loopback connections (admin required) (appcontainer only)
# lan = true         # local network access                (appcontainer only)
# named_pipes = true   # named pipe creation                 (restricted only)
# stdin = false      # block stdin (redirect to NUL)       (both modes)

# ============================================================
# REGISTRY — Registry key grants (restricted only)
# ============================================================
# [registry]
# read = ['HKCU\Software\MyApp']
# write = ['HKCU\Software\MyApp\Settings']

# ============================================================
# ENVIRONMENT — Control inherited variables
# ============================================================
# By default, all parent env vars are inherited.

[environment]
# inherit = false                         # don't inherit parent env vars
# pass = ['PATH', 'PYTHONPATH', 'HOME']   # specific vars to pass through

# ============================================================
# RESOURCE LIMITS
# ============================================================
# Constrain resource usage. Comment out for unlimited.

[limit]
# timeout = 300      # kill process after N seconds
# memory = 4096      # maximum memory in MB
# processes = 10     # maximum concurrent child processes
